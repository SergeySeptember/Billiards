<?xml version="1.0" encoding="utf-8"?>

<ContentView
    x:Class="Billiards.Views.SettingsView"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:vm="clr-namespace:Billiards.ViewModels"
    x:DataType="vm:SettingsViewModel">

    <ScrollView>
        <VerticalStackLayout Padding="16" Spacing="14">

            <Label Text="Настройки"
                   FontSize="20"
                   FontAttributes="Bold"
                   HorizontalOptions="Center" />

            <!-- Верхняя часть -->
            <Border Padding="14"
                    StrokeThickness="1"
                    Stroke="{AppThemeBinding Light=#DDDDDD, Dark=#444444}"
                    StrokeShape="RoundRectangle 16">
                <VerticalStackLayout Spacing="12">

                    <!-- Тема -->
                    <Grid ColumnDefinitions="*,Auto" VerticalOptions="Center">
                        <Label Text="Тёмная тема" VerticalTextAlignment="Center" />
                        <Switch Grid.Column="1"
                                IsToggled="{Binding IsDarkTheme}" />
                    </Grid>

                    <!-- Звуки -->
                    <Grid ColumnDefinitions="*,Auto" VerticalOptions="Center">
                        <Label Text="Включить звуки" VerticalTextAlignment="Center" />
                        <Switch Grid.Column="1"
                                IsToggled="{Binding IsSoundsEnabled}" />
                    </Grid>

                    <Grid ColumnDefinitions="*,Auto" VerticalOptions="Center">
                        <Label Text="Штрафные шары на полку" VerticalTextAlignment="Center" />
                        <Switch Grid.Column="2"
                                IsToggled="{Binding IsFoulToShelf}" />
                    </Grid>

                    <Grid ColumnDefinitions="*,Auto" VerticalOptions="Center">
                        <Label Text="Штрафные шары на стол" VerticalTextAlignment="Center" />
                        <Switch Grid.Column="3"
                                IsToggled="{Binding IsFoulToTable}" />
                    </Grid>

                    <Grid ColumnDefinitions="*,Auto" VerticalOptions="Center">
                        <Label Text="Счёт уходит в минус" VerticalTextAlignment="Center" />
                        <Switch Grid.Column="4"
                                IsToggled="{Binding IsNegativeScore}" />
                    </Grid>

                    <Grid ColumnDefinitions="*,Auto" VerticalOptions="Center">
                        <Label Text="Дураки отнимают общее кол-во шаров" VerticalTextAlignment="Center" />
                        <Switch Grid.Column="5"
                                IsToggled="{Binding MinusRandomBalls}" />
                    </Grid>

                    <BoxView HeightRequest="1"
                             BackgroundColor="{AppThemeBinding Light=#EEEEEE, Dark=#333333}" />

                    <!-- Кнопки игроков -->
                    <Grid ColumnDefinitions="*,*" ColumnSpacing="10">
                        <Button Text="Добавить игрока"
                                Command="{Binding AddPlayerCommand}" />
                        <Button Grid.Column="1"
                                Text="Удалить игрока"
                                Command="{Binding DeletePlayerCommand}" />
                    </Grid>

                    <!-- Очистка БД -->
                    <Button Text="Выгрузить данные"
                            Command="{Binding ExportDataCommand}" />

                    <Button Text="Загрузить данные"
                            Command="{Binding ImportDataCommand}" />

                    <Button Text="Очистить БД"
                            Command="{Binding ClearDbCommand}"
                            BackgroundColor="{AppThemeBinding Light=#D9534F, Dark=#B9413E}"
                            TextColor="White" />
                </VerticalStackLayout>
            </Border>

            <HorizontalStackLayout Spacing="16"
                                   HorizontalOptions="Center"
                                   VerticalOptions="Center">
                <!-- GitHub -->
                <Border StrokeThickness="1"
                        Stroke="{AppThemeBinding Light=#DDDDDD, Dark=#444444}"
                        StrokeShape="RoundRectangle 14"
                        Padding="10">
                    <ImageButton Source="github.png"
                                 BackgroundColor="Transparent"
                                 HeightRequest="36"
                                 WidthRequest="36"
                                 Command="{Binding OpenGithubCommand}" />
                </Border>

                <!-- Telegram -->
                <Border StrokeThickness="1"
                        Stroke="{AppThemeBinding Light=#DDDDDD, Dark=#444444}"
                        StrokeShape="RoundRectangle 14"
                        Padding="10">
                    <ImageButton Source="telegram.png"
                                 BackgroundColor="Transparent"
                                 HeightRequest="36"
                                 WidthRequest="36"
                                 Command="{Binding OpenTelegramCommand}" />
                </Border>

                <!-- Правила -->
                <Border StrokeThickness="1"
                        Stroke="{AppThemeBinding Light=#DDDDDD, Dark=#444444}"
                        StrokeShape="RoundRectangle 14"
                        Padding="10">
                    <ImageButton Source="rules.ico"
                                 BackgroundColor="Transparent"
                                 HeightRequest="36"
                                 WidthRequest="36"
                                 Command="{Binding OpenRulesCommand}" />
                </Border>
            </HorizontalStackLayout>

        </VerticalStackLayout>
    </ScrollView>
</ContentView>